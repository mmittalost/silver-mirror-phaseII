<app-header title="Book an Appointment"></app-header>

<section class="review-flow">
	<form class="container grid">
		
		<!--Breadcrumbs-->
        <app-breadcrumbs class="breadcrumbs-container"></app-breadcrumbs>

		<div class="content-container">
			
			<!--Credit Card-->
			
			<h2 class="heading-6">Payment Details</h2>
			<p class="xx-small">Have an account? <a class="text-link" href="#">Login or create an account</a></p>

			<label class="pill" for="card-detail-options" *ngIf="availablePaymentMethods.length">Card Details</label>
			
			<div class="flex-container credit-card-options" *ngIf="availablePaymentMethods.length">
				<ul id="card-detail-options" class="x-small" *ngFor="let card of availablePaymentMethods">
					<li class="active visa">
						<strong>{{card?.cardBrand}} •••• {{card?.cardLast4}} <span>Expires {{card?.cardExpMonth}}/{{card?.cardExpYear}}</span></strong>
						<span *ngIf="card?.cardIsDefault" class="pill fill small">Default</span>
					</li>
				</ul>
				
				<button class="text-link large" *ngIf="availablePaymentMethods.length" (click)="togglePaymentMethodForm = true">Add a new card</button>
			</div>
			
			<form [formGroup]="paymentForm" (ngSubmit)="updatePaymentMethod()">

				<ul class="grid credit-card-details">
					<li>
						<label class="pill" for="name">Name On The Card</label>
						<input formControlName="name" type="text" id="name" placeholder="Name On The Card"/>
					</li>
					<li>
						<label class="pill" for="card-details">Card Details</label>
						<input maxLength="16" minLength="15" formControlName="number" type="text" id="card-details" placeholder="Card Number"/>
					</li>

					<li class="mobile-only">
						<p class="xx-small info">Your credit card is only used to hold the reservation and won't be charged unless you cancel late or don't show up.</p>
					</li>
					
					<li>
						<label class="pill" for="card-exp">Expiration Date</label>
						<input maxLength="7" minLength="7" formControlName="expiry" type="text" id="card-exp" placeholder="MM/YYYY"/>
					</li>
					
					<li>
						<label class="pill" for="card-cvv">CVV</label>
						<input maxLength="3" minLength="3" formControlName="cvv" type="text" id="card-cvv" placeholder="***"/>
					</li>

					<li>
						<label class="pill" for="postal-code">Postal Code</label>
						<input maxLength="5" minLength="5" formControlName="postal_code" type="text" id="postal-code" placeholder="Postal Code"/>
					</li>
				</ul>
				<button type="submit" class="btn black cc-btn">Apply</button>
			</form>
			
			<p class="xx-small info">Your credit card is only used to hold the reservation and won't be charged unless you cancel late or don't show up.</p>
			
			<!--Additional Fields-->
			<h2 class="heading-6">Additional Information</h2>

			<form [formGroup]="userInfoForm" (ngSubmit)="updateUserInfo()">
				<ul class="grid additional-info">
					<li>
						<label class="pill" for="first-name">First Name</label>
						<input formControlName="firstName" type="text" id="first-name" placeholder="First Name"/>
					</li>
					
					<li>
						<label class="pill" for="last-name">Last Name</label>
						<input formControlName="lastName" type="text" id="last-name" placeholder="Last Name"/>
					</li>
					
					<li>
						<label class="pill" for="phone">Phone Number</label>
						<input type="tel" formControlName="mobilePhone" id="phone" placeholder="(555) 555-5555"/>
					</li>
					
					<li>
						<label class="pill" for="email">Email Address</label>
						<input formControlName="email" type="email" id="email" placeholder="email@address.com"/>
					</li>
					
					<li>
						<label class="pill" for="notes">Notes</label>
						<p class="xx-small">Preferences? Celebrations? Secrets you want to share? Let us know.</p>
						<input formControlName="note" type="text" id="notes" placeholder="Write any notes for us"/>
					</li>
				</ul>
			
				
				<div class="mobile-only flex-container promo-code">
					<label class="pill" for="promo-code">Promo Code</label>
					<input type="text" id="promo-code" placeholder="Enter Code"/>
					<button class="text-link large">Apply</button>
				</div>
				<button type="submit" class="btn black cc-btn">Save Changes</button>
				<h3>Disclaimer</h3>
				<p class="xx-small">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas varius tortor nibh, sit amet tempor nibh finibus et. Aenean eu enim justo. Vestibulum aliquam hendrerit molestie. Mauris malesuada nisi sit amet augue accumsan tincidunt. Maecenas tincidunt, velit ac porttitor pulvinar, tortor eros facilisis libero, vitae commodo nunc quam et ligula. Ut nec ipsum sapien. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer id nisi nec nulla luctus lacinia non eu turpis. Etiam in ex imperdiet justo tincidunt egestas. Ut porttitor urna ac augue cursus tincidunt sit amet sed orci.</p>
			</form>			
		</div>
		
		<!--Sidebar-->
		<aside class="empty">
			<app-cart></app-cart>

			<div [formGroup]="couponForm" class="desktop-only flex-container promo-code">
				<label class="pill small" for="promo-code">Promo Code</label>
				<input formControlName="promoCode" type="text" id="promo-code" placeholder="Enter Code"/>
				<button (click)="applyPromoCode()" type="submit" class="text-link large">Apply</button>
			</div>
			
			<span (click)="checkout()"><a class="btn black">Book Now</a></span>
	   </aside>
		
	</form>
</section>
<app-footer></app-footer>